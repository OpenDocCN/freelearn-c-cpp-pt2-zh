# 十三、有用的头脑黑魔法

我们在这本书中谈到了很多关于思考开发的方法，我们之前已经提出过一两次建议，有效开发人员与业余开发人员的不同之处与其说是他们知道什么，不如说是他们是如何思考的。

有效的思维是一种技能，就像其他任何事情一样，它是可以练习的。正如我们在上一章中看到的，你可以通过分解并找到起点来简化一个复杂的问题。现在让我们花点时间来探索更多可以帮助你的诀窍。

# 橡皮鸭调试

您可能以前听说过这个短语：**橡皮鸭调试**。 它已经存在很长一段时间了，它是你能表演的最有效的解决问题的技巧之一。 这里的想法很简单。 就拿任何愿意倾听的人来说，如果周围没有人，你桌子上的橡皮鸭也可以(因此而得名)。 大声、简单地描述你试图解决的问题。 这迫使你组织你对这个问题的想法。 如果你发现你不能用清晰、简单的术语来描述问题，那么你还不了解它。 你还没有准备好回答这个问题，因为你还不清楚你需要问什么问题。 玩它，探索它，直到你真的能用简单的术语来表达它。 通常，这个过程本身就会给你一个明确的解决方案，如果没有，你现在就有更好的机会找到解决方案，因为你现在知道你在问什么了。 大声说出来或写下来。 当你让事情在你脑海中翻滚时，你很容易对它保持模糊和粉饰。 强迫自己把话说清楚。 你会惊讶于这项技术的强大和有效。

# 只是事实而已

当你意识到你的软件出了问题时，写下你看到的情况。 不是你认为你所看到的，而是你所看到的。 在调试过程中，在真正确定您实际遇到的问题之前，就得出为什么会发生某些事情的结论，然后一头扎进解决该问题的努力中，实在是太容易了。 退一步，看看你能具体观察到什么。

这样想：*火炬在产生*时出现在错误的位置，而不是*，*产生的例程是把东西放在错误的位置*。你还不知道这一点。 你只知道一支火炬并不在你期望的地方。 做个实验。 繁殖另一个对象。 它出现在正确的位置了吗？ 好吧，那也许你的模型里有个奇怪的偏移量。 另一个物体也错位了吗？ 好的，那么，是的，可能是常规导致了它的产生。 或者，这可能是你的关卡中的一些冲突，阻止了它们在你想要的地方繁殖，而是把它们推到了最近的可用的地方。 试着移动产卵点，看看会不会改变情况。*

看到我们在这里做什么了吗？ 我们正在运用一种基本的科学方法来解决我们正在解决的问题。 我们看到了什么？ 我们能想到可能导致这种情况的原因是什么呢？ 我们怎样才能测试它，看看我们是否正确呢？ 我们的测试刚刚给了我们什么新的信息？ 我们现在知道的足够解决方案了吗？

匆忙下结论并耗费大量时间调试错误的问题是非常非常容易的。 花点时间后退一步会帮助你避免这样做，避免你在黑暗中被很多沮丧的刺伤。 这样你就可以解决问题了。

# 积极描述您的解决方案

我们在[第 10 章](10.html)，*中谈到了*货物崇拜编程*，*在 VR*中创建多人体验，并让您承诺不会这样做。 为了进一步说明这个想法，让我们看看一句我们希望你永远不要说出的话：*它起作用了-不要碰它！“**

这不是我们描述健壮系统的方式。 如果你想这么说，恭喜你！ 你正处于*让它工作；让它正确；让它快*这个过程的第一步，这意味着你还没有完成。 您所创建的是最终解决方案可能是什么样子的一个成功示例，但现在是开始*Make It Right*阶段的时候了。 当您可以对您的解决方案给出三个肯定的答案时，您就满足了开发这一步的要求：

*   它需要解决 X
*   我知道它解决了 X 因为..。
*   我知道这很安全，因为..。

记住这三句话。 不要跳过它们。 你应该能够清晰、简单地描述你想要做的事情。 (你的橡皮鸭也是一个很好的倾听者。)。 你应该能够解释为什么你刚刚做的事情会照顾到你正在尝试做的事情，你应该能够积极地做到这一点：*我们需要确保玩家在暂停菜单打开的时候不会开枪。 这通过让输入处理程序在调用 Fire 函数之前检查暂停状态来解决这个问题。* 最后，您应该能够解释为什么这样做是安全的：*我知道这样做是安全的，因为我们确保在暂停状态开始时清除所有现有输入，并且输入处理程序知道只允许取消暂停命令通过。*

约束自己做到这一点，并使用明确、积极的术语。 如果你含糊其辞，你就是在躲避一件你需要解决的事情。 养成这样的习惯：描述你正在尝试做什么，为什么你知道你的解决方案做到了这一点，以及为什么你知道这样做是安全的。 甚至在它们有机会以这种方式进入您的软件之前，您就可以阻止许多错误。

# 计划在编写代码时如何维护和调试代码

****技术债务**是一件阴险的事情。 这个术语描述的是修复代码中遗留的混乱(通常是由于仓促开发造成的)的下游成本。 这是一个项目杀手。**

例如，假设您需要为演示做好准备，而您的时间用完了，所以您加入了黑魔法解决方案。 然后，你把它留在那里，在上面建立了一堆额外的系统。 现在，你试图让你的游戏上线，而你所做的事情在客户机上显示不正确，你惊恐地意识到，你必须重写你在演示中的黑魔法攻击之上构建的每一个系统，更糟糕的是，你意识到这将需要数周的工作才能做到这一点，这一点令人惊恐地意识到，你必须重写你在那个黑魔法系统上构建的每一个系统，更糟糕的是，你意识到这将需要数周的工作才能做到这一点。

或者，假设您匆忙构建了蓝图，它确实有效，但看起来就像排水沟里的一团头发。 你可以转到下一个问题。 六个月后，你即将为你的发行商演示这款游戏，而你的系统中不断出现一个奇怪的错误。 自从你写完之后，你就没有看过它，现在你不得不整天整夜地整理你弄得乱七八糟的东西，这样你就可以找出 bug 发生在哪里。

在这两种情况下，如果你在你还记得的时候花时间清理你所做的工作，你会节省很多时间和心痛。 如果你一定要进行黑魔法攻击，那就把黑魔法攻击标记为黑魔法攻击，如果你知道正确的解决方案应该是什么，就把它写进黑魔法旁边的评论中。 然后在你在它上面建任何东西之前先把它修好。 如果你已经有了一个蓝图或一些代码在运行，直接进入你的*Make it*阶段，而你在*Make It*阶段学到的一切还在你的脑海中记忆犹新。

记住这一点：*一段代码的绝大部分生命周期都花在维护和调试上*。 把这一点灌输到你的脑海里。 调试代码比第一次编写代码要难得多，所以要尽您所能地发挥自己的优势。 如果您在第一次编写解决方案时匆忙行事，您不会节省任何时间。 你在它生命的一小部分上节省了时间，并且制造了一个令人头疼的大问题，这将在它生命的很长一段时间里困扰你。 计划好在编写代码时对其进行调试。 你会很高兴你这么做了。

# 喜欢简单的解决方案

可悲的是，您将遇到编写复杂、难以理解的代码或蓝图的开发人员，他们错误地试图给其他所有人留下深刻印象，让他们知道自己是多么聪明。 他们偷偷地幻想别人会回头看他们无法阅读的代码，然后想，*哇！ 他们一定很聪明！ 我什么都看不懂。* 求求你，哦，求求你，不要做这个开发者。

您真正想要得到尊重的经验丰富的开发人员不会被杂乱无章的蓝图或混乱的代码打动。 他们会奇怪你为什么把它弄得一团糟，并认为这是因为你不知道更好的东西。 业余爱好者编写的代码不可读。 专业人士知道，从现在起一年后，当他们忘记一切的时候，他们将不得不维护它，他们不想让这项工作变得更加困难。

如果你的*把它做对*的草稿比你的*草稿更简单、更干净，你就会知道你做得很好。*

 *# 在你编造之前先查一查

我们在[第 10 章](10.html)，*在 VR*中创建多人体验中提到了这一点，并想在此重申：新开发人员犯的核心错误之一是在他们潜入问题之前没有做研究，他们最终重写了已经编写的代码。

做你的功课。 当你试图解决一个问题时，在你开始破解它之前，先看看是否有人做过类似的事情，并留下了足迹。 引擎中是否已经有工具可以完成这项工作，或者大部分工作都可以完成？ 模板或示例项目中是否有示例说明如何解决此问题？ 有人在什么地方写了教程吗？ 有时候，答案会是*no*，但更多的时候，你会发现一些东西，要么直接指向一个解决方案，要么让你比没有它的情况下更接近解决方案。

我们曾经看到一小群工程师在一个问题上浪费了数周的开发预算，而这个问题已经通过一个免费许可插件的单一功能得到了解决。 这段时间并没有让游戏变得更好，你也不需要落入这个陷阱。 研究是开发过程的一部分，应该始终在开始键入或拖动节点之前进行。

这就把我们带到了下一个讨论的主题，当你需要查找信息时，你可以去哪里寻找呢？*