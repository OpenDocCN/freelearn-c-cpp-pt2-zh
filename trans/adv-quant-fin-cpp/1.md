# 第一章：什么是量化金融？

定量金融学研究定量技术在解决金融问题中的应用。 它横跨多个领域，如投资基金和保险公司的管理，制造业和银行业的金融风险控制，以及金融市场的行为。 定量金融是以金融、数学和信息学等学科的关键专业知识为基础的跨学科。

在这本书中，我们将关注定量金融的一个方面--使用 C++编程语言对金融衍生品进行定价。 在接下来的几节中，我们将描述构成量化金融的三个关键学科的主要特征：

*   财务管理 / 财政 / 金融 / 资金
*   数学 / 数学应用
*   信息（科）学

# 学科 1--金融(金融衍生品)

一般而言，金融衍生工具是双方同意在未来交换一个或多个现金流的合同。 这些现金流的价值取决于一些未来的事件，例如，某个股票指数或利率的价值高于或低于某个预定的水平。 因此，这一未来事件的激活或触发取决于被称为**的变量的行为，也就是潜在的**。 金融衍生品之所以得名，是因为它们的价值来自于另一种金融工具的行为。

因此，金融衍生品本身没有内在价值(与债券或股票不同)；它们的价格完全取决于标的。

因此，衍生品合约的一个关键特征是，它们未来的现金流是概率的，而不是确定性的。 衍生品合约的未来现金流取决于未来的一些事件。 这就是衍生品也被称为**或有债权**的原因。 这一特点使得这些类型的合同很难定价。

以下是最常见的金融衍生品类型：

*   前景 / 未来 / 前途
*   向前 / 今后 / 同 forward
*   选项
*   掉期

期货和远期是双方之间的金融合约。 一方同意在某个预定的日期(到期日)以某个预定的价格(交货价)从另一方购买标的。 一盎司白银的一个月远期合约就是一个例子。 标的是一盎司白银的价格。 开始时不发生现金流交换(今天，*t=0*)，但只在到期时发生(*t=T*)。 这里，*t*表示可变时间。 远期合约是双方私下协商的合约(换句话说，**在柜台**(**OTC**))，而期货是在交易所协商的。

选项是双方之间的财务合同。 一方(称为期权的**持有人**)向另一方(称为期权的**写入者**)支付溢价，以便有权利，但没有义务，在未来的某个特定日期(到期日)以某个特定的价格(执行价)购买特定的资产(标的)。 这种类型的合同被称为**欧洲呼叫**合同。

**示例 1**

考虑 S&P500 指数的个月看涨合约。 在这种情况下，标的将是 S&P500 指数的价值。 开始时(今天，*t=0*)和到期时(*t=T*)都有现金流。 在开始时(*t=0*)支付溢价，而在到期时(*t=T*)，期权持有人将根据标的到期时的价值*S(T)*在以下两种可能的情况中进行选择：

*   场景 A：行使他/她的权利并以*K*购买标的资产
*   场景 B：如果标的到期日的价值低于罢工的价值，即*S(T)<K*，则什么也不做

如果标的到期日的价值高于执行价，即*S(T)>K*，期权持有人将选择情景 A。 这将保证他/她获得*S(T)-K*的利润。 如果标的到期时的价值低于罢工的价值，即*S(T)<K*，期权持有人将选择情景 B。 这将保证他/她将他/她的损失限制在零。

**示例 2**

**利率互换**(**IRS**)是甲乙双方同意在一定期限(合同有效期)内定期交换现金流的金融合同。 通常，从 A 到 B 的现金流是以固定利率为指标的，而从 B 到 A 的现金流是以浮动利率为指标的。 固定现金流集被称为**固定支路**，，而浮动现金流集合被称为**浮动支路**。 现金流在合同有效期内从开始(*t=0*)到到期日(*t=T*)定期发生。 一个例子可以是固定浮动 IRS，他每三个月为商定的名义*N*支付 5%的税率，并每三个月收到商定的名义*N*的 EURIBOR3M。

**示例 3**

股指期货合约还包括在合约到期时支付的单一未来现金流(交割价格)。 然而，在这种情况下的回报是不确定的，因为我将从这个操作中获得多少利润将取决于标的到期时的价值。

如果标的的价格高于交割价格，那么我得到的回报(由函数*H*表示)为正(表示利润)，并且对应于标的到期时的价值*S(T)*和交割价格*K*之间的差额。 如果标的的价格低于交割价格，那么我得到的回报是负的(表示亏损)，对应于交割价格*K*与标的到期价值*S(T)*之间的差额。 这一特点可以用以下回报公式来概括：

![Discipline 1 – finance (financial derivatives)](../images/00002.jpeg)

方程式 1

这里，*H(S(T))*是到期收益，它是*S(T)*的函数。 金融衍生品是现代金融市场的重要组成部分。 根据**国际清算银行**(**BIS**)，截至 2012 年 12 月，全球场外衍生品合约未偿还金额为 673580 亿美元，利率衍生品为 489703 亿美元，股票挂钩衍生品为 62510 亿美元，商品衍生品为 25870 亿美元，信用违约互换(CDS)为 25069 亿美元。 有关详细信息，请参阅[http://www.bis.org/statistics/dt1920a.pdf](http://www.bis.org/statistics/dt1920a.pdf)。

# 学科 2-数学

我们需要数学模型来捕捉我们在金融衍生品中遇到的潜在现金流和或有现金流的未来演变和概率性质。

关于或有现金流，可以用我们正在考虑的特定衍生工具的收益函数*H(S(T))*来表示。 因为*S(T)*是随机变量，所以*H(S(T))*的值应该计算为期望*E[H(S(T))]*。 为了计算这个期望值，我们需要一些技术来预测或模拟潜在的*S(T)*在未来的行为，以便能够计算*ST*的值，并最终能够计算收益*E[H(S(T))]*的平均值。

关于底层的行为，通常使用**随机微分方程**(**SDEs**)来形式化，例如**几何布朗运动**(**GBM**)，如下所示：

![Discipline 2 – mathematics](../images/00003.jpeg)

方程式 2

前面的等式从根本上说，股票价格的变化(*DS*)可以理解为两种效应的总和-确定性效应(右手边的第一项)和随机项(右手边的第二项)。(*DS*)，可以理解为两种效应的总和-确定性效应(右手边的第一项)和随机项(右手边的第二项)。 参数![Discipline 2 – mathematics](../images/00004.jpeg)称为**漂移**，，参数![Discipline 2 – mathematics](../images/00005.jpeg)称为**波动率**。 *S*是股票价格，*DT*是小时间间隔，*DW*是维纳过程中的增量。

这个模型是描述股票、商品和外汇行为的最常见的模型。 存在其他模型，如跳跃、局部波动率和随机波动率模型，它们增强了对基础动态的描述。

关于数值方法，这些对应于将数学模型中描述的形式表达式(通常在连续时间中)转换为可用于计算(通常在离散时间中)的近似表示的方式。 这意味着，描述未来某些股指(如富时 100 指数)价格演变的 SDE 将改为描述离散时间间隔的演变。 可以使用欧拉近似计算 SDE 的近似表示，如下所示：

![Discipline 2 – mathematics](../images/00006.jpeg)

方程式 3

前面的方程式需要在从现在到合同到期之间的每个时间间隔内以迭代的方式求解。 如果这些时间间隔是天，并且合约从现在起有 30 天的到期日，那么我们就用今天来计算明天的价格。 然后我们计算后天作为明天价格的函数，以此类推。 为了给衍生品定价，我们需要计算到期时的预期收益*E[H(ST)]*，然后将其贴现到现在。 这样，我们就可以借助以下公式计算出与欧式期权合约相关的公平溢价![Discipline 2 – mathematics](../images/00007.jpeg)：

![Discipline 2 – mathematics](../images/00008.jpeg)

方程式 4

# 学科 3-信息学(C++编程)

C++在衍生品定价中扮演什么角色？ 它的作用是根本性的。 它允许我们实施中所需的实际计算，以解决定价问题。 使用前面的技术来描述底层的动态，我们需要模拟描述其演变的许多潜在的未来场景。 比方说，我们应该以一年期满的欧元兑美元汇率为期货合约定价。 我们必须模拟欧元兑美元在未来一年的每一天的走势(使用公式 3)。 然后我们可以计算到期时的收益(使用公式 1)。 然而，为了计算预期收益(使用公式 4)，我们需要通过一种称为**蒙特卡罗模拟**的技术来模拟数千种可能的演变。 完成此过程所需的一组步骤称为**算法**。 为了给衍生产品定价，我们应该构造这样的算法，然后用高级编程语言(如 C++)实现它。 当然，C++不是唯一可能的选择，其他语言包括 Java、VBA、C#、MathworksMatlab、和 Wolfram 数学 a。 然而，C++是行业标准，因为它灵活、快速和可移植。 此外，多年来，已经创建了几个数值库，用于用 C++进行复杂的数值计算。 最后，C++是一种功能强大的现代面向对象语言。

在清晰度和效率之间取得平衡总是很困难的。 我们的目标是使计算机程序自包含(不太面向对象)和自解释。 当然，更高级的实现也是可能的，特别是在公司环境中有更大的金融定价库的情况下。 在本书中，所有程序都是用最新的标准 C++11 实现的，使用**代码：：块**([http://www.codeblocks.org](http://www.codeblocks.org))和**minGW**([http://www.mingw.org](http://www.mingw.org))。

# 便当盒模板

便当盒是日本料理中常见的单份外卖套餐。 通常，它有一个长方形的形状，内部被分成几个隔间，以容纳构成一顿饭的各种类型的部分。 在本书中，我们使用便当盒子的比喻来描述一个可视化模板，以方便、组织和构建派生问题的解决方案。 Bento Box 模板只是一个表单，我们将按顺序填写不同的元素，我们需要这些元素以逻辑结构的方式为衍生品定价。 用于为特定衍生品定价的 Bento Box 模板分为四个区域或框，每个区域或框包含对问题的解决至关重要的信息。 下图说明了适用于所有衍生品的通用模板：

![The Bento Box template](../images/00009.jpeg)

便当盒模板-一般情况

下面的图显示了应用于简单的欧洲看涨期权的 Bento Box 模板的示例：

![The Bento Box template](../images/00010.jpeg)

便当盒模板-欧洲看涨期权

在上图中，我们已经填充了各个隔间，从左上角的方框开始，顺时针。 每个部分都包含有关我们具体问题的详细信息，从概念性问题(方框 1：衍生合同)到实际问题(方框 4：算法)，依次介绍解决方案所需的量化方面(方框 2：数学模型和方框 3：数值方法)。

# 摘要

本章概述了量化金融在金融衍生品定价中的应用。 在接下来的章节中，我们将使用 Bento Box 模板技术来组织我们解决金融衍生品定价问题的方法。 我们将假设我们掌握了足够的信息来填写第一栏(衍生品合约)。 有关数学模型(方框 2)的更多细节将在[章](2.html#I3QM2-f9cfc61bea324a5db85ec5ea1673cdfd "Chapter 2. Mathematical Models")，*数学模型*中描述。