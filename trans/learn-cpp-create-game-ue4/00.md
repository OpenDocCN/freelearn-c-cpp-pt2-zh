# 前言

因此，您希望使用虚幻引擎 4(UE4)编写您自己的游戏。 您有很多理由这样做：

*   UE4 功能强大：UE4 提供了一些 AAA 工作室使用的最先进、最漂亮、最逼真的灯光和物理效果。
*   UE4 与设备无关：为 UE4 编写的代码可以在 Windows 台式机、Mac 台式机、Android 设备和 iOS 设备上运行(在撰写本书时--未来可能会支持更多设备)。

因此，您可以使用 UE4 编写一次游戏的主要部分，然后毫无障碍地部署到 iOS 和 Android 市场。 (当然，会有一些故障：购买应用程序时，iOS 和 Android 必须分开编程。)

# 游戏引擎到底是什么？

游戏引擎类似于汽车引擎：驱动游戏的是游戏引擎。 您将告诉引擎您想要什么，并且(使用 C++ 代码和 UE4 编辑器)引擎将负责实际实现这一点。

您将围绕 UE4 游戏引擎构建游戏，类似于车身和车轮围绕实际汽车引擎构建的方式。 当您使用 UE4 发布游戏时，您基本上是在定制 UE4 引擎，并使用您自己的游戏的图形、声音和代码对其进行翻新。

# 使用 UE4 要花多少钱？

简而言之，答案是 19 美元和销售额的 5%。

“什么？” 你说。 19 美元？

没错。 只需 19 美元，你就可以完全使用世界级的 AAA 引擎，并提供完整的源代码。 考虑到其他引擎仅一个许可证的价格从 500 美元到 1000 美元不等，这是一个很划算的交易。

# 为什么我不直接给自己的引擎编程，省下 5%的钱呢？

相信我，如果你想在合理的时间框架内创建游戏，而且你没有一大群专门的引擎程序员来帮助你，你会想要把你的精力集中在你卖的东西上(你的游戏)。

不必专注于编写游戏引擎，您就可以自由地只考虑如何制作实际的游戏。 不用维护和修理你自己的引擎也让你解脱了心头的负担。

# 游戏概述-游戏-奖励-增长循环

我现在想向您展示这个图表，因为它包含了一个核心概念，许多新手开发人员在编写他们的第一个游戏时可能会忽略这个概念。 一款游戏可以拥有音效、图形、逼真的物理效果，但仍然感觉不像是一款游戏。 为什么会这样呢？

![A game's overview – the Play-Reward-Growth loop](img/00002.jpeg)

从循环的顶端开始，在游戏中做出的游戏动作(如击败怪物)会给玩家带来奖励(如金币或经验值)。 反过来，这些奖励可以用于游戏中的增长(例如增加属性或探索新世界)。 然后，这种增长以新的、有趣的方式推动了游戏的发展。 例如，一种新的武器可以改变战斗的基本机制，新的法术可以让你用完全不同的方法对付一群怪物，或者新的运输方式可以让你到达以前无法进入的地区。

这是创建有趣游戏的基本核心循环。 关键是，游戏必须带来某种奖励--想想从令人讨厌的坏蛋身上冒出来的闪闪发光的金币。 为了让奖励有意义，它必须在游戏中带来某种增长。 想想看，在*The Legend of Zelda*中，有多少新的位置是用勾手镜头解锁的。

只玩游戏(没有奖励或成长)的游戏不会感觉像游戏：它只会感觉像是游戏的一个真正的基本原型。 例如，想象一个飞行模拟器只有一个开放的世界，没有目标或目标，也没有能力升级你的飞机或武器。 这不会是一场很精彩的比赛。

一个只有游戏和奖励(但没有成长)的游戏会让人感觉原始而简单。 如果这些奖励不能用来做任何事情，他们就不会让玩家满意。

一个只有游戏和成长(没有奖励)的游戏只会被视为一个愚蠢的不断增加的挑战，而不会给玩家带来对他的成就的满足感。

一场包含所有三个要素的游戏会让玩家投入到一场有趣的比赛中。 这出戏有一个值得的结果(战利品下降和故事进展)，这导致了游戏世界的增长。 当你设计你的游戏时，记住这个循环真的会帮助你设计一个完整的游戏。

### 提示

原型是游戏概念的证明。 比方说，您想创建自己独特的*Blackjack*版本。 您可能要做的第一件事就是编写一个原型来展示游戏将如何进行。

## 货币化

在游戏开发的早期阶段，你需要考虑的是你的盈利策略。 你的游戏将如何赚钱？ 如果你正试图创办一家公司，你必须从一开始就考虑到你的收入来源是什么。

你会试着从购买价格中赚钱吗，比如*詹姆斯敦*，*The Banner Saga*，*Castle Crashers*，或者*The Crypt of the NecroDancer*？ 或者，您是否会专注于发布应用内购买的免费游戏，如*部落冲突*、*糖果粉碎传奇*或*地铁冲浪者*？

一类适用于移动设备的游戏(例如，iOS 上的 Builder 游戏)通过允许用户付费以跳过游戏，直接跳到循环的奖励和增长部分，从而赚了很多钱。 这样做的吸引力可能非常大；许多人在一场游戏上花费数百美元。

## 为什么选择 C++

UE4 是用 C++ 编写的。 要为 UE4 编写代码，您必须了解 C++。

C++ 是游戏程序员的常见选择，因为它结合了面向对象的编程特性提供了非常好的性能。 这是一种非常强大和灵活的语言。

# 这本书涵盖了哪些内容

[第一章](01.html#H5A42-dd4a3f777fc247568443d5ffb917736d "Chapter 1. Coding with C++")，*使用 C++ 编码*，讨论如何使用您的第一个 C++ 程序启动和运行。

[第 2 章](02.html#KVCC2-dd4a3f777fc247568443d5ffb917736d "Chapter 2. Variables and Memory")，*变量和内存*讨论如何从计算机内存创建、读取和写入变量。

[第 3 章](03.html#MSDG1-dd4a3f777fc247568443d5ffb917736d "Chapter 3. If, Else, and Switch")、*IF、ELSE 和 Switch*讨论了代码分支：即，根据程序条件允许执行代码的不同部分。

[第 4 章](04.html#RL0A2-dd4a3f777fc247568443d5ffb917736d "Chapter 4. Looping")，*循环*，讨论如何根据需要多次重复特定的代码段。

[第 5 章](05.html#10DJ41-dd4a3f777fc247568443d5ffb917736d "Chapter 5. Functions and Macros")，*函数和宏*讨论了函数，这些函数是可以被调用任意次数的代码包，您可以随意调用。

[第 6 章](06.html#190862-dd4a3f777fc247568443d5ffb917736d "Chapter 6. Objects, Classes, and Inheritance")，*对象、类和继承*讨论了类定义和基于类定义实例化一些对象。

[第 7 章](07.html#1GKCM1-dd4a3f777fc247568443d5ffb917736d "Chapter 7. Dynamic Memory Allocation")，*动态内存分配*讨论了堆分配的对象以及低级 C 和 C++ 风格的数组。

[第 8 章](08.html#1LCVG1-dd4a3f777fc247568443d5ffb917736d "Chapter 8. Actors and Pawns")，*角色和棋子*是我们真正深入研究 UE4 代码的第一章。 我们首先创建一个将参与者放入其中的游戏世界，并从定制的参与者派生一个`Avatar`类。

[第 9 章](09.html#1UU541-dd4a3f777fc247568443d5ffb917736d "Chapter 9. Templates and Commonly Used Containers")，*模板和常用容器*探讨了 UE4 和称为容器的 C++ STL 数据集合系列。 通常，通过选择正确的容器类型，编程问题可以简化很多倍。

[第 10 章](10.html#24L8G2-dd4a3f777fc247568443d5ffb917736d "Chapter 10. Inventory System and Pickup Items")，*库存系统和提货项目*讨论如何创建具有提货新项目能力的库存系统。

[第 11 章](11.html#28FAO1-dd4a3f777fc247568443d5ffb917736d "Chapter 11. Monsters")，*怪物*，教你如何创造怪物来追逐玩家并用武器攻击它。

[第 12 章](12.html#2C9D02-dd4a3f777fc247568443d5ffb917736d "Chapter 12. Spell Book")，*法术书*，教你如何在游戏中创建和施放法术。

# 这本书你需要什么

要使用此文本，您需要两个程序。 第一个是您的集成开发环境，即 IDE。 第二个软件当然是虚幻引擎本身。

如果您使用的是 Microsoft Windows，则需要 Microsoft Visual Studio 2013 速成版 Windows 桌面版。 如果您使用的是 Mac，那么您将需要 Xcode。 虚幻引擎可从[https://www.unrealengine.com/](https://www.unrealengine.com/)下载。

# 这本书是给谁看的

这本书是为任何想要编写虚幻引擎应用程序的人准备的。 正文首先告诉您如何编译和运行您的第一个 C++ 应用程序，然后是描述 C++ 编程语言规则的章节。 在介绍完 C++ 章节之后，您可以开始用 C++ 构建您自己的游戏应用程序。

# 公约

在这本书中，你会发现许多区分不同信息的文本样式。 以下是这些风格的一些示例，并解释了它们的含义。

文本、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄中的代码字如下所示：“`variableType`将告诉您我们将在变量中存储什么类型的数据。`variableName`是我们将用来读或写那块内存的符号。”

代码块设置如下：

```cpp
struct Player
{
  string name;
  int hp;
  // A member function that reduces player hp by some amount
  void damage( int amount ) {
    hp -= amount;
  }
  void recover( int amount ) {
    hp += amount;
  }
};
```

**新术语**和**重要单词**以粗体显示。 屏幕上显示的文本如下所示：从**文件**菜单中，选择**新建项目...。**

### 备注

相关的额外信息，但有点旁注，会出现在这样的盒子里。

### 提示

提示和技巧如下所示。

# 读者反馈

欢迎读者的反馈。 让我们知道你对这本书的看法-你喜欢什么或不喜欢什么。 读者反馈对于我们开发真正能让您获得最大收益的图书非常重要。

要向我们发送一般反馈，只需发送电子邮件至`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并通过消息主题提及书名。

如果有一个您擅长的主题，并且您有兴趣撰写或投稿一本书，请参阅我们位于[www.Packtpub.com/Authors](http://www.packtpub.com/authors)上的作者指南。

# 客户支持

现在您已经成为 Packt 图书的拥有者，我们有很多东西可以帮助您从购买中获得最大价值。

## 下载示例代码

您可以从您的帐户[http://www.packtpub.com](http://www.packtpub.com)下载购买的所有 Packt 图书的示例代码文件。 如果您在其他地方购买了本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件通过电子邮件直接发送给您。

## 下载本书彩色图片

我们还为您提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。 彩色图像将帮助您更好地了解输出中的更改。 您可以从[https://www.packtpub.com/sites/default/files/downloads/6572OT_ColoredImages.pdf](https://www.packtpub.com/sites/default/files/downloads/6572OT_ColoredImages.pdf)下载此文件。

## 勘误表

虽然我们已经竭尽全力确保内容的准确性，但错误还是会发生。 如果您在我们的一本书中发现错误--可能是文本或代码中的错误--如果您能向我们报告，我们将不胜感激。 通过这样做，您可以将其他读者从挫折中解救出来，并帮助我们改进本书的后续版本。 如果您发现任何勘误表，请访问[http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的图书，单击**勘误表****提交****表**链接，然后输入勘误表的详细信息。 一旦您的勘误表被核实，您提交的勘误表将被接受，勘误表将被上传到我们的网站上，或添加到该标题勘误表部分下的任何现有勘误表列表中。 通过从[http://www.packtpub.com/support](http://www.packtpub.com/support)中选择您的书目，可以查看任何现有勘误表。

## 盗版

在互联网上盗版版权材料是所有媒体持续存在的问题。 在 Packt，我们非常重视版权和许可证的保护。 如果您在互联网上发现任何形式的非法复制我们的作品，请立即提供我们的位置、地址或网站名称，以便我们采取补救措施。

请拨打`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`与我们联系，并提供疑似盗版材料的链接。

我们感谢您在保护我们的作者方面的帮助，以及我们为您提供有价值内容的能力。

## 问题

如果您对本书的任何方面有任何问题，可以拨打`<[questions@packtpub.com](mailto:questions@packtpub.com)>`与我们联系，我们将尽最大努力解决。