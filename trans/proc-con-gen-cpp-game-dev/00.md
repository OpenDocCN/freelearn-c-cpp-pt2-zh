# 零、前言

计算机游戏是一种庞大的媒介，在过去的三到四十年中已经发展了数十种流派。游戏比以往任何时候都更大，更具沉浸感，游戏玩家的期望从未如此高。虽然具有固定故事和固定进度的线性游戏仍然很普遍，但越来越多的动态和开放式游戏正在开发中。

计算机硬件和视频游戏技术的进步为 “游戏世界” 一词赋予了更多的字面意义。游戏地图的尺寸和灵活性不断增加，这要归功于程序生成等技术。购买同一款游戏的两个游戏玩家可能会有非常不同的体验，因为内容是动态生成的。

在本书中，我们将介绍程序生成，学习即时生成内容所需的技能，以创建动态且不可预测的游戏系统和机制。

随著本书提供的是一个类似流氓的 C 游戏的游戏模板。当我们在[第 2 章](02.html "Chapter 2. Project Setup and Breakdown")，*项目设置和分解*中编译和设置项目时，您会看到它目前只是一个空壳。但是，在我们阅读本书的过程中，您将通过现实世界的示例向您介绍程序生成内容背后的概念。然后，我们将在空项目中实现这些示例。

# 这本书涵盖了什么

[第一章](01.html "Chapter 1. An Introduction to Procedural Generation")，*程序生成导论*，向我们介绍了 it 程序生成这一广阔的主题。我一直觉得真正学习某些东西的关键部分是理解为什么要这样做。知道某件事是如何完成的，这真是太好了，但是知道它的起源以及它的方式可以创建更完整的图片和更深刻的理解。在本章中，我们将回到程序生成的诞生及其进入现代计算机游戏的旅程。

[第 2 章](02.html "Chapter 2. Project Setup and Breakdown")，*项目设置和分解*解释了如何在所选 IDE 中设置提供的类似流氓的游戏项目，并提供了有关 Visual Studio 和 Code::Blocks 的详细说明。它是用 C /SFML 编写的，我们将在本书中扩展它。我们还将介绍您可能面临的常见问题，并首次运行该项目。

[第三章](03.html "Chapter 3. Using RNG with C++ Data Types")，*使用 RNG 与 C 数据类型*，探讨了随机数生成 (RNG)，包括它周围的问题以及我们如何将其与 C 数据类型一起使用以在运行时实现随机结果。RNG 是程序生成的核心，是我们模拟计算机随机运行并通过算法实现动态结果的方式。

[第 4 章](04.html "Chapter 4. Procedurally Populating Game Environments")，*程序填充环境*，通过在地图周围的随机位置生成项目和敌人，帮助我们进一步发展我们的水平。程序生成的环境是程序生成游戏的主要内容，在随机位置生成游戏对象是实现这一目标的一大步。

[第 5 章](05.html "Chapter 5. Creating Unique and Randomized Game Objects")，*创建唯一的随机对象*，探索了我们可以创建唯一的随机游戏对象的方法。某些项目将在运行时过程中生成，这意味着将存在大量可能的组合。我们将在前几章中介绍用于实现这一目标的技能和技术。我们将把这一切结合起来，建立一个程序系统!

[第 6 章](06.html "Chapter 6. Procedurally Generating Art")，*程序化生成 Art*，通过从简单的成员变量随机设置转向程序艺术和图形的创建来加强我们的程序化工作。我们将在程序上为敌人创建纹理，并更改关卡精灵，使地下城的每一层都具有独特的感觉。

[第 7 章](07.html "Chapter 7. Procedurally Modifying Audio")，*程序上修改音频*，着眼于艺术的最近表亲，音频，使用类似的技术在我们的声音中创造差异。我们还将使用 SFML 的音频功能来创建专门的 3D 声音，从而为我们的水平带来更多深度。

[第 8 章](08.html "Chapter 8. Procedural Behavior and Mechanics")，*程序行为和力学*，利用我们迄今为止所学到的一切，以寻路和独特的水平目标的形式创建复杂的程序行为和力学。我们将为敌人提供穿越关卡并追逐玩家的情报。我们还将创建独特的关卡目标，并为玩家提供独特的奖励。

[第 9 章](09.html "Chapter 9. Procedural Dungeon Generation")，*程序性地下城生成*，完成了我们在游戏项目上的工作。我们将实现 roguelike 游戏最具标志性的功能: 程序生成的关卡。在整个书中，我们一直在使用相同的固定级别。所以，现在是我们开始按程序生成它们的时候了!我们还将在级别之间创建一些差异，并实现我们在上一章中创建的目标生成器。

[第 10 章](10.html "Chapter 10. Component-Based Architecture")，*基于组件的架构*介绍了基于组件的设计，因为我们在模板项目上的工作现已完成。程序生成完全是关于灵活性的。因此，我们想要使用最灵活的架构是有道理的。基于组件的架构可以实现这一目标，并且对这种设计方法有很好的了解将有助于您在未来进步和构建更大的系统。

[第 11 章](11.html "Chapter 11. Epilogue")，*结语*回顾了我们完成程序性旅程时所涉及的项目和主题。对于我们使用的程序生成的每个领域，如果您希望深入探讨该主题，我们还将确定一些起点。

# 这本书你需要什么

在编写本书的整个过程中，我使用了 Windows 桌面的 Visual Studio 社区 2015。这是一个很棒的 IDE，它具有为 Windows 创建 C 游戏所需的所有工具。它可以从 Microsoft 免费获得，因此我强烈建议您下载并在本书的整个过程中使用它。

如果您以前从未使用过它，请不要担心; 我们将详细介绍项目设置，以便您习惯我们将使用的 IDE 部分。我还将提供 Code:: 块的设置说明。如果您选择不使用 IDE，则需要访问 C 编译器，以便可以运行我们将在本书中进行的项目。

# 这本书是给谁的

本书针对的是那些具有 C 游戏开发知识的人，并且希望将程序生成纳入他们的游戏中。它将假定对编程的基本原理 (例如数据类型，返回类型，方法调用等) 有相当扎实的理解。由于我们不会研究底层引擎，因此还假定对游戏开发背后的概念有所了解。

提供了一个游戏模板，我们将使用 SFML 在本书的整个过程中对其进行扩展。假设没有使用 SFML 的经验。完成本书后，您将对程序生成的内容是什么，在游戏中如何使用它以及将应用于真实游戏的实用技能的集合有扎实的了解。

# 约定

在本书中，您将找到许多区分不同类型信息的文本样式。以下是这些样式的一些示例及其含义的解释。

文本、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 url、用户输入和 Twitter 句柄中的代码字如下所示: “我们调用了`std::srand()`并设置了一个新的种子，但是每次运行程序时，我们再次设定相同的种子”

一个代码块设置如下:

```cpp
Stirng myStringLiteral = "hello";
string myString = { 'h', 'e', 'l', 'l', 'o', '\0' };
```

当我们希望提请您注意代码块的特定部分时，相关行或项目以粗体设置:

```cpp
// If the enemy is dead remove it.
if (enemy.IsDead())
{
    enemyIterator = m_enemies.erase(enemyIterator);

    // If we have an active goal decrement killGoal.
 if (m_activeGoal)
 {
 --m_killGoal;
 }
}
```

**新术语**和**重要词语**以粗体显示。例如，在菜单或对话框中，您在屏幕上看到的单词显示在如下文本中: “在代码:: 块中，将以下内容添加到项目的**构建选项**和**搜索目录**选项卡中。”

### 注意

警告或重要注释出现在这样的框中。

### 提示

提示和技巧是这样出现的。

## 额外练习

在每一章的末尾，都有一些可以完成的复习题和进一步的练习。虽然这本书并不重要，但建议你完成它们，这样你就可以衡量你对所涵盖主题的理解，并获得更多的经验。

# 读者反馈

我们总是欢迎读者的反馈。让我们知道您对这本书的看法-您喜欢或不喜欢什么。读者反馈对我们很重要，因为它可以帮助我们开发您将真正充分利用的标题。

要向我们发送一般反馈，只需发送电子邮件`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并在您的邮件主题中提及这本书的标题。

如果您有专业知识，并且有兴趣撰写或撰写书籍，请参阅我们的《作者指南》，网址为[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

既然你是一本 Packt 书的骄傲拥有者，我们有很多东西可以帮助你从购买中获得最大的东西。

## 下载示例代码

您可以从您购买的所有 Packt 出版书籍的[http://www.packtpub.com](http://www.packtpub.com)帐户下载示例代码文件。如果您在其他地方购买了这本书，则可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册以将文件直接通过电子邮件发送给您。

## 下载这本书的彩色图像

我们还为您提供了一个 pdf 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。彩色图像将帮助您更好地理解输出中的变化。您可以从[http://www.packtpub.com/sites/default/files/downloads/ 6713OT_ColoredImages.pdf](http://www.packtpub.com/sites/default/files/downloads/6713OT_ColoredImages.pdf)下载此文件。

## Wrong

尽管我们已竭尽全力确保内容的准确性，但确实会发生错误。如果您在我们的一本书中发现错误-可能是文本或代码中的错误-如果您可以向我们报告，我们将不胜感激。通过这样做，您可以使其他读者免于沮丧，并帮助我们改进本书的后续版本。如果您发现任何勘误表，请通过访问[http://www.packtpub.com/提交-勘误表](http://www.packtpub.com/submit-errata)，选择您的书，点击**勘误表**链接，并输入您的勘误表的详细信息来报告它们。一旦您的勘误表被验证，您的提交将被接受，勘误表将被上传到我们的网站或添加到该标题勘误表部分下的任何现有勘误表列表中。

要查看之前提交的勘误表，请转到[https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)，然后在搜索栏中输入书的名称。所需信息将显示在**勘误表**部分下。

## 盗版

互联网上受版权保护的材料的盗版是所有媒体上持续存在的问题。在 Packt，我们非常重视版权和许可证的保护。如果您在互联网上以任何形式发现我们作品的任何非法副本，请立即向我们提供位置地址或网站名称，以便我们寻求补救。

请通过`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`与我们联系，并提供可疑盗版材料的链接。

我们感谢您在保护我们的作者方面的帮助以及我们为您带来宝贵内容的能力。

## 问题

如果你对这本书的任何方面有问题，你可以通过`<[questions@packtpub.com](mailto:questions@packtpub.com)>`联系我们，我们会尽最大努力解决这个问题。