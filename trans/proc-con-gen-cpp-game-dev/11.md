# 第 11 章。结语

随着我们的游戏完成，在快速涉足基于组件的设计之后，我们对过程内容生成的介绍就完成了。我们从随机数的生成和使用开始，然后努力创建复杂的程序行为和内容。我们已经谈到了许多主题，希望通过本书来帮助定义程序生成是什么，并给出了一些在游戏中如何处理和实现它的可靠示例。

在你最后一次关闭这本书之前，让我们快速回顾一下这个项目，确定我们是如何以及在哪里实现程序生成的。然后，在完成工作之前，我们将最后一次重申其利弊。

# 项目明细

我们的游戏项目最初是一个功能有限的空白 roguelike 模板，但是通过我们的工作，我们将其变成了一个成熟的程序性 roguelike 游戏。让我们通过项目来确定我们如何使用程序生成来做到这一点。

如果您希望详细探讨主题，我们还将为每一章确定一些进一步的可能练习。本书的目的是向您介绍该主题的基本原理，因此希望您可以在进一步发展的过程中取得成功。

## 程序填充环境

我们从在关卡周围随机产生游戏项目开始。这涉及在给定范围内生成随机数，并将其用作图块索引和枚举器值。这是我们第一次使用随机数和枚举来选择随机值和项，这是我们在本书的整个过程中非常依赖的一种技术。

如果您希望进一步了解这一点，则可以看看如何偏置项目的生成位置或将其限制在地图的某些区域。因此，例如，您可以偏置生成位置，使得所有宝石都倾向于生成到关卡的右侧，所有黄金都倾向于生成到左侧。虽然不会立即对我们的项目有益，但您可以想象它在其他情况下可能会有用。您可能希望所有敌人在某个级别的部分生成，或者在地图的给定区域生成某个项目。获得对你的游戏水平的更多控制将是非常有益的。

## 创建独特和随机的游戏对象

随着我们的物品现在散布在各个级别上，我们将注意力转向使它们更加随机和独特。我们在运行时生成它们，而不是对项目变量进行硬编码，从而使对象更加多样化。我们使用此技术从单个类创建多个对象类型，例如来自同一类的所有 potipes。

为了在项目中进一步扩展这一点，为什么不尝试添加一些随机的装甲和/或武器呢？它们可以被敌人丢弃，并具有随机的精灵和统计数据。您可以采用与药水相同的方法，并创建一个模棱两可的类，该类可以产生各种可能性。

## 程序化生成艺术

在这一章中，我们看到了如何从程序上创造艺术。我们从一个简单的方法开始，通过使用 SFML 的内置精灵修改功能，并转移到一个更复杂的方法，在这个方法中，我们渲染多个精灵组件一起创建新的，独特的，给敌人随机装甲。

如果你想了解更多，你应该看看如何完全从头开始创作艺术。有一些算法，例如 Perlin 和单纯形噪声，会产生 2D 噪声。这些算法可以用作过程纹理的基础。开始研究这样的算法，然后从那里开始。

## 程序修改音频

在程序上生成音频是一项复杂的任务。因此，我们在本章中所做的工作有些简短，实际上仅限于从程序上修改现有的声音，而不是直接创建。与 art 一样，SFML 提供了一系列功能来编辑声音，例如音高和音量，这些功能用于给简单的声音带来一些差异。然后，我们使用 SFML 的内置音频功能创建了空间化的 3D 声音，使我们的游戏具有一定的深度。

声音可以完全在程序上生成，但这是一个复杂而困难的过程，因此，与其他程序实现相比，它不是很受欢迎。但是，如果您想进一步研究这一点，则可以从创建单个声音开始，并学习计算机如何产生它们。从这里开始，这是一个学习如何将这些声音组合在一起的案例以创建吸引人的东西，然后生成程序算法来做到这一点。这不是给胆小者的，这是肯定的!

## 程序行为与力学

从 简单使用随机数和从枚举器中选择值的过程中，我们实现了一个更加复杂和丰富的程序系统，以寻路的形式为敌人提供了基本的 AI。我们实现了 * 寻路，使敌人能够在迷宫中追逐玩家。我们还创建了一个系统来生成随机级别的目标，所以现在我们的玩家会定期呈现一个独特的目标，以换取独特的奖励。

我们生成的游戏机制相当简单，那么为什么不去自己生成一些更复杂的游戏呢？您可以为玩家提供必须完成的实际任务才能继续玩游戏。否则，如果是人工智能工作吸引了你的兴趣，你可以在它的基础上再接再厉，让敌人变得更聪明，更具挑战性。也许如果他们失去了玩家的视线，他们将停止追逐，或者他们尝试预测玩家的移动来阻止您，而不是简单地跟随。

## 程序性地牢生成

对于我们的坚持，我们实施了程序性地牢生成。直到这个点水平是从一个文本文件加载的，但是我们实现了一个递归反向跟踪算法来生成一个迷宫，然后在那个迷宫中添加房间来创建更多的开放区域。因此，级别现在是程序生成的，我们可以通过单个函数调用生成一个新的级别。

有很多方法可以处理程序性地牢生成，并且可以使用许多不同的算法来实现此目的。如果您对这个地区感兴趣，则有足够的探索空间。看看一些替代算法，并对实现进行实验。尝试生成一些具有不同特征的房间，或者添加一些环境和美学特征以赋予一个层次更多的特征。

### 提示

一个很好的进一步阅读资源是[http://weblog.jamisbuck.org/](http://weblog.jamisbuck.org/) 。博客是与迷宫生成相关的一切的金矿，涵盖了许多算法。你绝对应该去看看。

## 基于组件的体系结构

程序性内容生成围绕着灵活性，因此，我觉得接触基于组件的设计将是结束我们工作的好方法。通过基于组件的设计，我们可以创建一个灵活的代码库，其固有的灵活性将使实现过程系统变得更加容易。

我们在本章中浏览了基于组件的设计的基础知识，并研究了几个孤立的示例。一个很好的练习是在项目中运行，将其转移到完全基于组件的方法中。这将真正让你熟悉这个概念，你将准备好在下一个项目中使用它。

# 程序生成的利弊

最后一次，让我们来看看在我们的游戏中使用程序生成的主要利弊。

## Pros

*   它创建动态内容
*   它可以节省内存使用量
*   它节省了开发时间和金钱
*   它创造了各种各样的选择
*   它增加了可重放性

## 缺点

*   你放弃控制权 *
*   这可能会给硬件增加负担
*   它会感觉重复
*   很难编写设置游戏事件的脚本
*   它可能会生成不可用的内容

### 注意

* 您将放弃的控制量取决于算法的质量。归根结底，您是编写算法的人。因此，你可以让它做你想做的。

# 总结

希望您发现本书中的内容有用。我们的目标是向你介绍程序生成这个巨大的话题，我觉得使用真正的游戏是最好的方法。我们涵盖了发展的关键领域，并确定了在每个方面使用程序生成的方法。希望您现在有足够的知识可以在自己的游戏中使用它，并且可以进行进一步的阅读以了解有关您最感兴趣的领域的更多信息。

记住，程序生成不仅仅是一件事或一种方法。这是内容的动态生成。没有一个正确的方法来实现它，所以实验。寻找动态创建内容并使用它的新方法。没有错误的答案。

编程快乐!